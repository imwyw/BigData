<!-- TOC -->

- [环境](#环境)
    - [网络配置](#网络配置)
        - [hosts设置](#hosts设置)
        - [network设置](#network设置)
        - [ip地址配置](#ip地址配置)
        - [物理主机host](#物理主机host)
        - [物理主机虚拟网卡](#物理主机虚拟网卡)

<!-- /TOC -->

<a id="markdown-环境" name="环境"></a>
# 环境

基本环境：

- VMware 12，虚拟机虚拟网卡设置为主机模式
- CentOS 6.5

<a id="markdown-网络配置" name="网络配置"></a>
## 网络配置

打开【Application】-【System Tools】-【Terminal】终端，在终端中输入命令 `ifconfig` 观察ip配置：

```bash
[root@localhost ~]# ifconfig
eth0      Link encap:Ethernet  HWaddr 00:0C:29:E0:C0:CB  
          inet addr:192.168.0.128  Bcast:192.168.0.255  Mask:255.255.255.0
          inet6 addr: fe80::20c:29ff:fee0:c0cb/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:113 errors:0 dropped:0 overruns:0 frame:0
          TX packets:127 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:159965 (156.2 KiB)  TX bytes:6994 (6.8 KiB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:16436  Metric:1
          RX packets:88 errors:0 dropped:0 overruns:0 frame:0
          TX packets:88 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:7744 (7.5 KiB)  TX bytes:7744 (7.5 KiB)
```

<a id="markdown-hosts设置" name="hosts设置"></a>
### hosts设置
linux主机名的相关配置文件就是/etc/hosts；

这个文件告诉主机那些域名对应那些ip,哪些主机名对应哪些ip， `vi` 命令修改【hosts】文件

```bash
[root@localhost ~]# vi /etc/hosts
```

添加内容如下：

```bash
127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6
192.168.0.128 master001 #添加此行，IP为虚拟机地址，主机名对应
```

<a id="markdown-network设置" name="network设置"></a>
### network设置
进行网络配置：

```bash
[root@localhost ~]# vi /etc/sysconfig/network
```

修改主机名称：

```bash
NETWORKING=yes
HOSTNAME=master001
```

<a id="markdown-ip地址配置" name="ip地址配置"></a>
### ip地址配置

进行IP地址的配置：
```bash
[root@localhost ~]# vi /etc/sysconfig/network-scripts/ifcfg-eth0 
```

修改内容如下：

```bash
DEVICE="eth0"
BOOTPROTO="static"
HWADDR="00:0C:29:E0:C0:CB"
IPV6INIT="yes"
NM_CONTROLLED="yes"
ONBOOT="yes"
TYPE="Ethernet"
UUID="5865aa15-b660-4552-9bd9-68ee612fc9ff"
IPADDR="192.168.0.128"
NETMASK="255.255.255.0"
GATEWAY="192.168.0.1"
```

修改 `BOOTPROTO` 为静态 `static` ，并设置 `IPADDR` , `NETMASK` , `GATEWAY` 

完成以上设置后，重启虚拟机。

```bash
[root@localhost ~]# reboot
```

重启后，可在linux中使用 `ping` 命令测试与物理主机的连通。

```bash
[root@master001 ~]# ping 192.168.0.100
```

同样，也可以 ping 命令测试虚拟机IP和主机名是否生效：

```bash
[root@master001 ~]# ping master001
[root@master001 ~]# ping 192.168.0.128
```

<a id="markdown-物理主机host" name="物理主机host"></a>
### 物理主机host
可以通过设置物理主机的host文件，通过主机名进行 ping 

默认路径为【C:\Windows\System32\drivers\etc\hosts】，新增如下配置：

```bash
# master001
192.168.0.128 master001
```

在物理主机命令提示符中，即可通过虚拟主机名进行通信：

```bash
C:\Users\xxxxx>ping master001

正在 Ping master001 [192.168.0.128] 具有 32 字节的数据:
来自 192.168.0.128 的回复: 字节=32 时间<1ms TTL=64
来自 192.168.0.128 的回复: 字节=32 时间<1ms TTL=64
来自 192.168.0.128 的回复: 字节=32 时间<1ms TTL=64
来自 192.168.0.128 的回复: 字节=32 时间<1ms TTL=64
```

注意，修改hosts文件需要有管理员权限！

<a id="markdown-物理主机虚拟网卡" name="物理主机虚拟网卡"></a>
### 物理主机虚拟网卡

虚拟机网卡为“主机”模式，虚拟主机网卡与物理主机【VMware Network Adapter VMnet1】网卡为同一网段，即可以通讯。

在物理主机中，可以通过在命令提示符中输入： `ipconfig` 命令，观察 VMnet1 网卡的IP地址；

或者在VMware安装路径下【vmnetcfg.exe】程序中找到主机模式下的IP地址。















